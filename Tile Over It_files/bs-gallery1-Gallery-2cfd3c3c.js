define("@widget/GALLERY/bs-gallery1-Gallery-2cfd3c3c.js",["exports","@widget/GALLERY/c/bs-wrapWithLazyLoader","@wsb/guac-widget-shared@^1/lib/components/Carousel","@widget/GALLERY/c/bs-wrapWithDeviceDetection","@widget/GALLERY/c/bs-CustomArrows","@widget/GALLERY/c/bs-directionalKeyHandlers","@widget/GALLERY/c/bs-util"],(function(e,t,a,o,l,i,s){"use strict";const r=({maxWidthCaption:e,captionContainerHeight:a,caption:o})=>(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.FigCaption,{"data-aid":t.dataAids.GALLERY_CAPTION_RENDERED,children:o,richtext:!0,style:{textAlign:"center",maxWidth:e||"",minHeight:a||"",paddingTop:"small",margin:"0 auto"}});r.propTypes={maxWidthCaption:(global.PropTypes||guac["prop-types"]).string,captionContainerHeight:(global.PropTypes||guac["prop-types"]).string,caption:(global.PropTypes||guac["prop-types"]).string};const n={mobile:{minWidth:200,maxWidth:300,height:210},tablet:{minWidth:400,maxWidth:800,height:600},smallTablet:{minWidth:300,maxWidth:600,height:400}};var c=t.wrapWithLazyLoader(o.wrapWithDeviceDetection(class extends(global.React||guac.react).Component{constructor(e){super(e),this.state={arrows:!1,selectedIndex:0,nextSlideIncremental:0},this.updateSelectedIndex=this.updateSelectedIndex.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.nextSlideDebounced=(global._||guac.lodash).debounce((e=>i.handleDirectionalKeys({keyCode:e.keyCode,context:this})),200)}static get propTypes(){return{autoplay:(global.PropTypes||guac["prop-types"]).bool,category:(global.PropTypes||guac["prop-types"]).string,className:(global.PropTypes||guac["prop-types"]).string,device:(global.PropTypes||guac["prop-types"]).string,images:(global.PropTypes||guac["prop-types"]).array,renderAsThumbnail:(global.PropTypes||guac["prop-types"]).bool,section:(global.PropTypes||guac["prop-types"]).string,showthumbnails:(global.PropTypes||guac["prop-types"]).bool,size:(global.PropTypes||guac["prop-types"]).string,currentImageSelected:(global.PropTypes||guac["prop-types"]).string,fullBleed:(global.PropTypes||guac["prop-types"]).bool,showArrows:(global.PropTypes||guac["prop-types"]).bool,autoplayDelay:(global.PropTypes||guac["prop-types"]).string,hasCaption:(global.PropTypes||guac["prop-types"]).bool}}static get defaultProps(){return{category:"neutral",device:"tablet",images:[],autoplay:!1,showArrows:!0}}static getDerivedStateFromProps(e,t){const{images:a=[]}=e,{selectedIndex:o}=t;return o>=a.length?{selectedIndex:0}:null}handleMouseLeave(){this.setState({mouseOnCarousel:!1,arrows:!1})}handleMouseEnter(){this.setState({mouseOnCarousel:!0}),this.handleMouseMove()}handleMouseMove(){this.state.arrows||this.setState({arrows:!0}),clearTimeout(this.timer),this.timer=setTimeout((()=>{this.setState({arrows:!1})}),1e3)}renderFakeCarousel(e){const t={marginVertical:0,marginHorizontal:"xxsmall",display:"inline-block",height:500,width:700},a=e[e.length-1],o=e[0],l=e.length>1?e[1]:o,s="mobile"!==this.props.device?"700px":null,{selectedIndex:n}=this.state;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{color:"highlight"},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{width:900,overflow:"hidden",margin:"0 auto",whiteSpace:"nowrap"}},(global.React||guac.react).cloneElement(a,{style:(global._||guac.lodash).merge({},t,{margin:"0 5px 0 -605px",opacity:.3})}),(global.React||guac.react).cloneElement(o,{style:t}),(global.React||guac.react).cloneElement(l,{style:(global._||guac.lodash).merge({},t,{opacity:.3})})),(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{width:900,overflow:"hidden",margin:"0 auto"}},(global.React||guac.react).createElement(r,{maxWidthCaption:s,captionContainerHeight:this.props.hasCaption?40:0,caption:e[n].caption||""}),this.props.showthumbnails&&(global.React||guac.react).createElement(i.FakeThumbNav,{images:this.props.images,thumbImageDimensions:i.thumbImageDimensions,baseStyle:{position:"relative"}})))}componentDidUpdate(e){const{currentImageSelected:t}=this.props;t!==e.currentImageSelected&&t>-1&&this.setState({selectedIndex:parseInt(t,10)})}componentWillUnmount(){i.modifyKeyDownEventHandler(this.nextSlideDebounced)}renderCarousel(e=[],o,n){const{showthumbnails:c,device:g,currentImageSelected:p,images:d,fullBleed:h,autoplayDelay:u,autoplay:m,hasCaption:b}=this.props,{selectedIndex:y,nextSlideIncremental:w}=this.state,x=p>-1?parseInt(p,10):y,C={initialSlide:parseInt(x,10)},E=d[y]&&d[y].caption||"",v="mobile"!==g?"700px":null,T=[];b&&T.push({component:r,props:{maxWidthCaption:v,captionContainerHeight:40,caption:E},position:"bottom"});const S=!h||c||b?"auto":`${o.height}px`,I=1e3*(parseFloat(u)||3.5);if(c&&"mobile"!==g&&d.length>1){const{height:e}=i.thumbImageDimensions,t={height:e,width:e},a=d.map((({imageData:e})=>({url:s.getImageUrl((global.Core||guac["@wsb/guac-widget-core"]).utils.generateImageServiceUrl((global._||guac.lodash).omit(e,"position")),t.height,t.height),caption:e.caption,alt:e.alt})));T.push({component:i.ThumbnailNavList,props:{images:a,thumbWidth:70,thumbHeight:e,renderContainer:h},position:"bottom"})}n&&T.push({component:l.CustomArrows,props:{visible:this.state.arrows,overrideArrowStyle:{top:0,marginTop:o.height/2+"px"},triggerNextSlide:w},position:"bottom"});const L=h?{imagesToPrefetch:10}:{};return(global.React||guac.react).createElement(a.default,t._extends({key:p,dots:!1,arrows:!1,cellPadding:5,infinite:d.length>1,slideHeight:`${o.height}px`,slideWidth:"inherit",draggable:d.length>1,autoplay:m,autoplaySpeed:I,afterChange:this.updateSelectedIndex,controls:T,children:e,pauseOnHover:!h,style:{slide:{opacity:"0.3"},selectedSlide:{opacity:"1"},track:{lineHeight:0}},height:S},C,L))}updateSelectedIndex(e){this.setState({selectedIndex:e})}render(){const{device:e,images:a,renderAsThumbnail:l,size:s,fullBleed:r,showArrows:c}=this.props,g=(global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,p=e===o.TABLET&&"sm"===s?n.smallTablet:n[e],d=("mobile"===e||"xs"===s)&&l,h=a.map((({imageData:e},a)=>{const o=1300,l=800,s=(global.Core||guac["@wsb/guac-widget-core"]).utils.generateImageServiceUrl({...e,additionalUrlParams:[`rs=w:${o},h:${l}`]});return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Image,t._extends({tag:"img",src:s,"data-aid":t.getGalleryDataAid(a),"data-route":"",alt:e.alt||"",key:a,style:{maxWidth:"100%",position:"relative",height:"100%",objectFit:"contain"},onMouseEnter:i.modifyKeyDownEventHandler.bind(this,this.nextSlideDebounced,!0),onMouseLeave:i.modifyKeyDownEventHandler.bind(this,this.nextSlideDebounced)},t.getGalleryDataRouteProps(a,{isImage:!0})))}));let u=null;if(h.length){const t=c&&"mobile"!==e&&h.length>1,a=d?this.renderFakeCarousel(h):this.renderCarousel(h,p,t),o=(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Group.Carousel,{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,children:a});u=r?o:(global.React||guac.react).createElement(g,{size:1},o)}const m=r?(global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block:(global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Container;return(global.React||guac.react).createElement(m,{"data-test-radpack":"bootstrap2"},u)}}));e.default=c})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-gallery1-Gallery-2cfd3c3c.js.map
